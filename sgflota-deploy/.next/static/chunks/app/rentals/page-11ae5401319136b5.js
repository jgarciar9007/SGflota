(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[167],{9513:function(e,t,a){Promise.resolve().then(a.bind(a,6122))},6122:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var n=a(7437),r=a(2265),i=a(2376),s=a(4226),l=a(9178),d=a(8068),o=a(9397),c=a(1047),u=a(5252),m=a(2489),f=a(4508);function p(){let{rentals:e,vehicles:t,clients:a,addRental:p,endRental:h}=(0,i.e)(),[x,g]=(0,r.useState)(!1),[y,b]=(0,r.useState)({vehicleId:"",clientId:"",startDate:new Date().toISOString().split("T")[0]}),v=e=>{h(e,new Date().toISOString().split("T")[0])},j=e.filter(e=>"Activo"===e.status),N=e.filter(e=>"Finalizado"===e.status),w=t.filter(e=>"Disponible"===e.status);return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-3xl font-bold tracking-tight text-white",children:"Rentas"}),(0,n.jsx)("p",{className:"text-gray-300",children:"Gestiona las rentas activas y el historial."})]}),(0,n.jsxs)(s.z,{onClick:()=>g(!0),className:"bg-blue-600 hover:bg-blue-700 text-white shadow-lg",disabled:0===w.length||0===a.length,children:[(0,n.jsx)(o.Z,{className:"mr-2 h-4 w-4"})," Nueva Renta"]})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[(0,n.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),"Rentas Activas (",j.length,")"]}),(0,n.jsx)("div",{className:"space-y-3",children:j.map(e=>{let r=t.find(t=>t.id===e.vehicleId),i=a.find(t=>t.id===e.clientId),d=Math.ceil((new Date().getTime()-new Date(e.startDate).getTime())/864e5),o=d*e.dailyRate;return(0,n.jsx)(l.Zb,{className:"border-gray-700 bg-gray-800/50 backdrop-blur",children:(0,n.jsx)(l.aY,{className:"p-4",children:(0,n.jsx)("div",{className:"flex items-center justify-between gap-4",children:(0,n.jsxs)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-5 gap-4 items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-bold text-white",children:null==r?void 0:r.name}),(0,n.jsx)("p",{className:"text-sm text-gray-300",children:null==i?void 0:i.name})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,n.jsx)(c.Z,{className:"h-4 w-4 text-blue-400"}),new Date(e.startDate).toLocaleDateString()]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,n.jsx)(u.Z,{className:"h-4 w-4 text-green-400"}),(0,f.x)(e.dailyRate),"/d\xeda"]}),(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsx)("span",{className:"text-white font-bold",children:d}),(0,n.jsx)("span",{className:"text-gray-300",children:" d\xedas"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsx)("p",{className:"text-xs text-gray-400",children:"Total actual"}),(0,n.jsx)("p",{className:"text-lg font-bold text-white",children:(0,f.x)(o)})]}),(0,n.jsx)(s.z,{onClick:()=>v(e.id),className:"bg-green-600 hover:bg-green-700 text-white",children:"Devolver"})]})]})})})},e.id)})}),0===j.length&&(0,n.jsx)("p",{className:"text-gray-400 text-center py-8 bg-gray-800/30 rounded-lg border border-gray-700",children:"No hay rentas activas"})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h3",{className:"text-xl font-bold text-white mb-4",children:["Historial de Rentas (",N.length,")"]}),(0,n.jsx)("div",{className:"space-y-3",children:N.map(e=>{let r=t.find(t=>t.id===e.vehicleId),i=a.find(t=>t.id===e.clientId);return(0,n.jsx)(l.Zb,{className:"border-gray-700 bg-gray-800/30 backdrop-blur opacity-75",children:(0,n.jsx)(l.aY,{className:"p-4",children:(0,n.jsx)("div",{className:"flex items-center justify-between gap-4",children:(0,n.jsxs)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-4 gap-4 items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-bold text-white",children:null==r?void 0:r.name}),(0,n.jsx)("p",{className:"text-sm text-gray-300",children:null==i?void 0:i.name})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,n.jsx)(c.Z,{className:"h-4 w-4 text-blue-400"}),new Date(e.startDate).toLocaleDateString()," - ",e.endDate&&new Date(e.endDate).toLocaleDateString()]}),(0,n.jsx)("div",{className:"text-sm text-gray-300",children:(0,n.jsx)("span",{className:"px-2 py-1 rounded-full bg-gray-700 text-xs",children:"Completado"})}),(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsx)("p",{className:"text-xs text-gray-400",children:"Total"}),(0,n.jsx)("p",{className:"text-lg font-bold text-white",children:(0,f.x)(e.totalAmount||0)})]})]})})})},e.id)})}),0===N.length&&(0,n.jsx)("p",{className:"text-gray-400 text-center py-8 bg-gray-800/30 rounded-lg border border-gray-700",children:"No hay rentas completadas"})]}),x&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,n.jsxs)(l.Zb,{className:"w-full max-w-md border-gray-700 bg-gray-900",children:[(0,n.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between border-b border-gray-700",children:[(0,n.jsx)(l.ll,{className:"text-white",children:"Nueva Renta"}),(0,n.jsx)("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-white",children:(0,n.jsx)(m.Z,{className:"h-5 w-5"})})]}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault();let a=t.find(e=>e.id===y.vehicleId);a&&(p({...y,endDate:null,dailyRate:a.price,status:"Activo"}),g(!1),b({vehicleId:"",clientId:"",startDate:new Date().toISOString().split("T")[0]}))},children:[(0,n.jsxs)(l.aY,{className:"space-y-4 pt-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm text-gray-300 font-medium",children:"Cliente"}),(0,n.jsxs)("select",{value:y.clientId,onChange:e=>b({...y,clientId:e.target.value}),className:"w-full h-10 px-3 rounded-md bg-gray-800 border border-gray-700 text-white mt-1",required:!0,children:[(0,n.jsx)("option",{value:"",children:"Seleccionar cliente"}),a.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm text-gray-300 font-medium",children:"Veh\xedculo"}),(0,n.jsxs)("select",{value:y.vehicleId,onChange:e=>b({...y,vehicleId:e.target.value}),className:"w-full h-10 px-3 rounded-md bg-gray-800 border border-gray-700 text-white mt-1",required:!0,children:[(0,n.jsx)("option",{value:"",children:"Seleccionar veh\xedculo"}),w.map(e=>(0,n.jsxs)("option",{value:e.id,children:[e.name," - ",(0,f.x)(e.price),"/d\xeda"]},e.id))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm text-gray-300 font-medium",children:"Fecha de Inicio"}),(0,n.jsx)(d.I,{type:"date",value:y.startDate,onChange:e=>b({...y,startDate:e.target.value}),className:"bg-gray-800 border-gray-700 text-white mt-1",required:!0})]})]}),(0,n.jsx)(l.eW,{className:"border-t border-gray-700 pt-6",children:(0,n.jsx)(s.z,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:"Crear Renta"})})]})]})})]})}},4226:function(e,t,a){"use strict";a.d(t,{z:function(){return l}});var n=a(7437),r=a(2265),i=a(5293),s=a(4508);let l=r.forwardRef((e,t)=>{let{className:a,variant:r="default",size:l="default",asChild:d=!1,...o}=e,c=d?i.g7:"button";return(0,n.jsx)(c,{className:(0,s.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-red-500 text-white hover:bg-red-600",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground"}[r],{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}[l],a),ref:t,...o})});l.displayName="Button"},9178:function(e,t,a){"use strict";a.d(t,{Ol:function(){return l},SZ:function(){return o},Zb:function(){return s},aY:function(){return c},eW:function(){return u},ll:function(){return d}});var n=a(7437),r=a(2265),i=a(4508);let s=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border border-border bg-card text-card-foreground shadow-sm glass",a),...r})});s.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...r})});l.displayName="CardHeader";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});d.displayName="CardTitle";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-gray-400",a),...r})});o.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...r})});u.displayName="CardFooter"},8068:function(e,t,a){"use strict";a.d(t,{I:function(){return s}});var n=a(7437),r=a(2265),i=a(4508);let s=r.forwardRef((e,t)=>{let{className:a,type:r,...s}=e;return(0,n.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","border-white/10 bg-white/5 focus:border-primary",a),ref:t,...s})});s.displayName="Input"},2376:function(e,t,a){"use strict";a.d(t,{DataProvider:function(){return u},e:function(){return m}});var n=a(7437),r=a(2265);let i=(0,r.createContext)(void 0),s="sgflota_data",l=[{id:"1",name:"Tesla Model 3",type:"El\xe9ctrico",range:"500 km",price:120,image:"https://images.unsplash.com/photo-1536700503339-1e4b06520771?q=80&w=2693&auto=format&fit=crop",status:"Disponible",plate:"ABC-123",year:2023},{id:"2",name:"BMW M4 Competition",type:"Gasolina",range:"600 km",price:250,image:"https://images.unsplash.com/photo-1617788138017-80ad40651399?q=80&w=2670&auto=format&fit=crop",status:"Disponible",plate:"XYZ-789",year:2024},{id:"3",name:"Mercedes AMG GT",type:"Gasolina",range:"450 km",price:300,image:"https://images.unsplash.com/photo-1618843479313-40f8afb4b4d8?q=80&w=2670&auto=format&fit=crop",status:"Disponible",plate:"DEF-456",year:2023}],d=[{id:"1",name:"Juan P\xe9rez",email:"juan@example.com",phone:"+34 600 123 456",address:"Calle Mayor 1, Madrid",dni:"12345678A"}],o={name:"SGFlota - Sistema de Gesti\xf3n de Flota",logo:"",address:"Calle Principal 123, Madrid, Espa\xf1a",phone:"+34 900 123 456",email:"info@sgflota.com",taxId:"B12345678",website:"www.sgflota.com"},c=[{id:"1",name:"Admin User",email:"admin@sgflota.com",role:"Admin",status:"Active"}];function u(e){let{children:t}=e,[a,u]=(0,r.useState)([]),[m,f]=(0,r.useState)([]),[p,h]=(0,r.useState)([]),[x,g]=(0,r.useState)([]),[y,b]=(0,r.useState)([]),[v,j]=(0,r.useState)(o),[N,w]=(0,r.useState)([]),[S,D]=(0,r.useState)([]);(0,r.useEffect)(()=>{let e=localStorage.getItem(s);if(e){let t=JSON.parse(e);u(t.vehicles||l),f(t.clients||d),h(t.rentals||[]),g(t.invoices||[]),b(t.maintenances||[]),j(t.companySettings||o),w(t.users||c),D(t.payments||[])}else u(l),f(d),j(o),w(c)},[]),(0,r.useEffect)(()=>{(a.length>0||m.length>0)&&localStorage.setItem(s,JSON.stringify({vehicles:a,clients:m,rentals:p,invoices:x,maintenances:y,companySettings:v,users:N,payments:S}))},[a,m,p,x,y,v,N,S]);let I=(e,t)=>{u(a=>a.map(a=>a.id===e?{...a,...t}:a))},C=e=>{let t={...e,id:Date.now().toString(),payments:[],paidAmount:0};g(e=>[...e,t])},k=(e,t)=>{g(a=>a.map(a=>a.id===e?{...a,...t}:a))};return(0,n.jsx)(i.Provider,{value:{vehicles:a,clients:m,rentals:p,invoices:x,maintenances:y,companySettings:v,addVehicle:e=>{let t={...e,id:Date.now().toString()};u(e=>[...e,t])},updateVehicle:I,deleteVehicle:e=>{u(t=>t.filter(t=>t.id!==e))},addClient:e=>{let t={...e,id:Date.now().toString()};f(e=>[...e,t])},updateClient:(e,t)=>{f(a=>a.map(a=>a.id===e?{...a,...t}:a))},deleteClient:e=>{f(t=>t.filter(t=>t.id!==e))},addRental:e=>{let t={...e,id:Date.now().toString()};h(e=>[...e,t]),I(e.vehicleId,{status:"Rentado"})},endRental:(e,t)=>{let a=p.find(t=>t.id===e);if(a){let n=Math.ceil((new Date(t).getTime()-new Date(a.startDate).getTime())/864e5)*a.dailyRate;h(a=>a.map(a=>a.id===e?{...a,endDate:t,status:"Finalizado",totalAmount:n}:a)),I(a.vehicleId,{status:"Disponible"}),C({rentalId:e,clientId:a.clientId,amount:n,date:t,status:"Pendiente"})}},addInvoice:C,updateInvoice:k,addPayment:(e,t,a)=>{let n=Date.now().toString(),r=new Date().toISOString().split("T")[0],i=[];return t.forEach(t=>{let s=x.find(e=>e.id===t.invoiceId);if(!s)return;let l={id:Math.random().toString(36).substr(2,9),receiptId:n,clientId:e,invoiceId:t.invoiceId,amount:t.amount,date:r,method:a};i.push(l);let d=s.payments||[],o=(s.paidAmount||0)+t.amount,c=o>=s.amount?"Pagado":o>0?"Parcial":"Pendiente";k(t.invoiceId,{payments:[...d,l],paidAmount:o,status:c})}),D(e=>[...e,...i]),n},addMaintenance:e=>{let t={...e,id:Date.now().toString()};b(e=>[...e,t]),I(e.vehicleId,{status:"Mantenimiento"})},updateMaintenance:(e,t)=>{if(b(a=>a.map(a=>a.id===e?{...a,...t}:a)),"Completado"===t.status){let t=y.find(t=>t.id===e);t&&I(t.vehicleId,{status:"Disponible"})}},updateCompanySettings:e=>{j(t=>({...t,...e}))},users:N,payments:S,addUser:e=>{let t={...e,id:Date.now().toString()};w(e=>[...e,t])},updateUser:(e,t)=>{w(a=>a.map(a=>a.id===e?{...a,...t}:a))},deleteUser:e=>{w(t=>t.filter(t=>t.id!==e))}},children:t})}function m(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useData must be used within a DataProvider");return e}},4508:function(e,t,a){"use strict";a.d(t,{cn:function(){return i},x:function(){return s}});var n=a(1994),r=a(3335);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,n.W)(t))}function s(e){return Math.round(e).toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")+" FCFA"}},1047:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(9205).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},5252:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(9205).Z)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},9397:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(9205).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},2489:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(9205).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5293:function(e,t,a){"use strict";a.d(t,{g7:function(){return c}});var n=a(2265),r=a.t(n,2);function i(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}var s=a(7437),l=Symbol.for("react.lazy"),d=r[" use ".trim().toString()];function o(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===l&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var c=function(e){let t=function(e){let t=n.forwardRef((e,t)=>{let{children:a,...r}=e;if(o(a)&&"function"==typeof d&&(a=d(a._payload)),n.isValidElement(a)){var s;let e,l;let d=(s=a,(e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?s.ref:(e=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?s.props.ref:s.props.ref||s.ref),o=function(e,t){let a={...t};for(let n in t){let r=e[n],i=t[n];/^on[A-Z]/.test(n)?r&&i?a[n]=(...e)=>{let t=i(...e);return r(...e),t}:r&&(a[n]=r):"style"===n?a[n]={...r,...i}:"className"===n&&(a[n]=[r,i].filter(Boolean).join(" "))}return{...e,...a}}(r,a.props);return a.type!==n.Fragment&&(o.ref=t?function(...e){return t=>{let a=!1,n=e.map(e=>{let n=i(e,t);return a||"function"!=typeof n||(a=!0),n});if(a)return()=>{for(let t=0;t<n.length;t++){let a=n[t];"function"==typeof a?a():i(e[t],null)}}}}(t,d):d),n.cloneElement(a,o)}return n.Children.count(a)>1?n.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),a=n.forwardRef((e,a)=>{let{children:r,...i}=e;o(r)&&"function"==typeof d&&(r=d(r._payload));let l=n.Children.toArray(r),c=l.find(m);if(c){let e=c.props.children,r=l.map(t=>t!==c?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,s.jsx)(t,{...i,ref:a,children:n.isValidElement(e)?n.cloneElement(e,void 0,r):null})}return(0,s.jsx)(t,{...i,ref:a,children:r})});return a.displayName=`${e}.Slot`,a}("Slot"),u=Symbol("radix.slottable");function m(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===u}}},function(e){e.O(0,[590,971,117,744],function(){return e(e.s=9513)}),_N_E=e.O()}]);