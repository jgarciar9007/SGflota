(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[368],{132:function(e,t,r){Promise.resolve().then(r.bind(r,6609))},6609:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var n=r(7437),a=r(2265),i=r(2376),s=r(4226),l=r(9178),o=r(8068),d=r(9397),c=r(9525),u=r(1047),m=r(5252),f=r(2489),p=r(4508);function g(){let{maintenances:e,vehicles:t,addMaintenance:r,updateMaintenance:g}=(0,i.e)(),[h,x]=(0,a.useState)(!1),[b,y]=(0,a.useState)({vehicleId:"",description:"",date:new Date().toISOString().split("T")[0],cost:""}),v=(e,t)=>{g(e,{status:t})},w=t.filter(e=>"Mantenimiento"!==e.status);return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-3xl font-bold tracking-tight text-white",children:"Mantenimiento"}),(0,n.jsx)("p",{className:"text-gray-300",children:"Programa y gestiona el mantenimiento de veh\xedculos."})]}),(0,n.jsxs)(s.z,{onClick:()=>x(!0),className:"bg-blue-600 hover:bg-blue-700 text-white shadow-lg",disabled:0===w.length,children:[(0,n.jsx)(d.Z,{className:"mr-2 h-4 w-4"})," Programar Mantenimiento"]})]}),(0,n.jsx)("div",{className:"space-y-3",children:e.map(e=>{let r=t.find(t=>t.id===e.vehicleId);return(0,n.jsx)(l.Zb,{className:"border-gray-700 bg-gray-800/50 backdrop-blur hover:bg-gray-800/70 transition-colors",children:(0,n.jsx)(l.aY,{className:"p-4",children:(0,n.jsx)("div",{className:"flex items-center justify-between gap-4",children:(0,n.jsxs)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-5 gap-4 items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-bold text-white",children:null==r?void 0:r.name}),(0,n.jsx)("p",{className:"text-sm text-gray-300",children:null==r?void 0:r.plate})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,n.jsx)(c.Z,{className:"h-4 w-4 text-orange-400"}),e.description]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,n.jsx)(u.Z,{className:"h-4 w-4 text-blue-400"}),new Date(e.date).toLocaleDateString()]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,n.jsx)(m.Z,{className:"h-4 w-4 text-green-400"}),(0,p.x)(e.cost)]}),(0,n.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,n.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold border-2 ".concat("Completado"===e.status?"bg-green-600 text-white border-green-500":"En Proceso"===e.status?"bg-blue-600 text-white border-blue-500":"bg-yellow-600 text-white border-yellow-500"),children:e.status}),"Programado"===e.status&&(0,n.jsx)(s.z,{onClick:()=>v(e.id,"En Proceso"),className:"bg-blue-600 hover:bg-blue-700 text-white text-sm",children:"Iniciar"}),"En Proceso"===e.status&&(0,n.jsx)(s.z,{onClick:()=>v(e.id,"Completado"),className:"bg-green-600 hover:bg-green-700 text-white text-sm",children:"Completar"})]})]})})})},e.id)})}),0===e.length&&(0,n.jsx)("p",{className:"text-gray-400 text-center py-8 bg-gray-800/30 rounded-lg border border-gray-700",children:"No hay mantenimientos programados"}),h&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,n.jsxs)(l.Zb,{className:"w-full max-w-md border-gray-700 bg-gray-900",children:[(0,n.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between border-b border-gray-700",children:[(0,n.jsx)(l.ll,{className:"text-white",children:"Programar Mantenimiento"}),(0,n.jsx)("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-white",children:(0,n.jsx)(f.Z,{className:"h-5 w-5"})})]}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r({...b,cost:parseFloat(b.cost),status:"Programado"}),x(!1),y({vehicleId:"",description:"",date:new Date().toISOString().split("T")[0],cost:""})},children:[(0,n.jsxs)(l.aY,{className:"space-y-4 pt-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm text-gray-300 font-medium",children:"Veh\xedculo"}),(0,n.jsxs)("select",{value:b.vehicleId,onChange:e=>y({...b,vehicleId:e.target.value}),className:"w-full h-10 px-3 rounded-md bg-gray-800 border border-gray-700 text-white mt-1",required:!0,children:[(0,n.jsx)("option",{value:"",children:"Seleccionar veh\xedculo"}),w.map(e=>(0,n.jsxs)("option",{value:e.id,children:[e.name," - ",e.plate]},e.id))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm text-gray-300 font-medium",children:"Descripci\xf3n"}),(0,n.jsx)(o.I,{value:b.description,onChange:e=>y({...b,description:e.target.value}),placeholder:"Cambio de aceite, revisi\xf3n general...",className:"bg-gray-800 border-gray-700 text-white mt-1",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm text-gray-300 font-medium",children:"Fecha Programada"}),(0,n.jsx)(o.I,{type:"date",value:b.date,onChange:e=>y({...b,date:e.target.value}),className:"bg-gray-800 border-gray-700 text-white mt-1",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm text-gray-300 font-medium",children:"Costo Estimado (FCFA)"}),(0,n.jsx)(o.I,{type:"number",value:b.cost,onChange:e=>y({...b,cost:e.target.value}),className:"bg-gray-800 border-gray-700 text-white mt-1",required:!0})]})]}),(0,n.jsx)(l.eW,{className:"border-t border-gray-700 pt-6",children:(0,n.jsx)(s.z,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:"Programar"})})]})]})})]})}},4226:function(e,t,r){"use strict";r.d(t,{z:function(){return l}});var n=r(7437),a=r(2265),i=r(5293),s=r(4508);let l=a.forwardRef((e,t)=>{let{className:r,variant:a="default",size:l="default",asChild:o=!1,...d}=e,c=o?i.g7:"button";return(0,n.jsx)(c,{className:(0,s.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-red-500 text-white hover:bg-red-600",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground"}[a],{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}[l],r),ref:t,...d})});l.displayName="Button"},9178:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return s},aY:function(){return c},eW:function(){return u},ll:function(){return o}});var n=r(7437),a=r(2265),i=r(4508);let s=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border border-border bg-card text-card-foreground shadow-sm glass",r),...a})});s.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});o.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-gray-400",r),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},8068:function(e,t,r){"use strict";r.d(t,{I:function(){return s}});var n=r(7437),a=r(2265),i=r(4508);let s=a.forwardRef((e,t)=>{let{className:r,type:a,...s}=e;return(0,n.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","border-white/10 bg-white/5 focus:border-primary",r),ref:t,...s})});s.displayName="Input"},2376:function(e,t,r){"use strict";r.d(t,{DataProvider:function(){return u},e:function(){return m}});var n=r(7437),a=r(2265);let i=(0,a.createContext)(void 0),s="sgflota_data",l=[{id:"1",name:"Tesla Model 3",type:"El\xe9ctrico",range:"500 km",price:120,image:"https://images.unsplash.com/photo-1536700503339-1e4b06520771?q=80&w=2693&auto=format&fit=crop",status:"Disponible",plate:"ABC-123",year:2023},{id:"2",name:"BMW M4 Competition",type:"Gasolina",range:"600 km",price:250,image:"https://images.unsplash.com/photo-1617788138017-80ad40651399?q=80&w=2670&auto=format&fit=crop",status:"Disponible",plate:"XYZ-789",year:2024},{id:"3",name:"Mercedes AMG GT",type:"Gasolina",range:"450 km",price:300,image:"https://images.unsplash.com/photo-1618843479313-40f8afb4b4d8?q=80&w=2670&auto=format&fit=crop",status:"Disponible",plate:"DEF-456",year:2023}],o=[{id:"1",name:"Juan P\xe9rez",email:"juan@example.com",phone:"+34 600 123 456",address:"Calle Mayor 1, Madrid",dni:"12345678A"}],d={name:"SGFlota - Sistema de Gesti\xf3n de Flota",logo:"",address:"Calle Principal 123, Madrid, Espa\xf1a",phone:"+34 900 123 456",email:"info@sgflota.com",taxId:"B12345678",website:"www.sgflota.com"},c=[{id:"1",name:"Admin User",email:"admin@sgflota.com",role:"Admin",status:"Active"}];function u(e){let{children:t}=e,[r,u]=(0,a.useState)([]),[m,f]=(0,a.useState)([]),[p,g]=(0,a.useState)([]),[h,x]=(0,a.useState)([]),[b,y]=(0,a.useState)([]),[v,w]=(0,a.useState)(d),[j,N]=(0,a.useState)([]),[S,C]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=localStorage.getItem(s);if(e){let t=JSON.parse(e);u(t.vehicles||l),f(t.clients||o),g(t.rentals||[]),x(t.invoices||[]),y(t.maintenances||[]),w(t.companySettings||d),N(t.users||c),C(t.payments||[])}else u(l),f(o),w(d),N(c)},[]),(0,a.useEffect)(()=>{(r.length>0||m.length>0)&&localStorage.setItem(s,JSON.stringify({vehicles:r,clients:m,rentals:p,invoices:h,maintenances:b,companySettings:v,users:j,payments:S}))},[r,m,p,h,b,v,j,S]);let k=(e,t)=>{u(r=>r.map(r=>r.id===e?{...r,...t}:r))},I=e=>{let t={...e,id:Date.now().toString(),payments:[],paidAmount:0};x(e=>[...e,t])},D=(e,t)=>{x(r=>r.map(r=>r.id===e?{...r,...t}:r))};return(0,n.jsx)(i.Provider,{value:{vehicles:r,clients:m,rentals:p,invoices:h,maintenances:b,companySettings:v,addVehicle:e=>{let t={...e,id:Date.now().toString()};u(e=>[...e,t])},updateVehicle:k,deleteVehicle:e=>{u(t=>t.filter(t=>t.id!==e))},addClient:e=>{let t={...e,id:Date.now().toString()};f(e=>[...e,t])},updateClient:(e,t)=>{f(r=>r.map(r=>r.id===e?{...r,...t}:r))},deleteClient:e=>{f(t=>t.filter(t=>t.id!==e))},addRental:e=>{let t={...e,id:Date.now().toString()};g(e=>[...e,t]),k(e.vehicleId,{status:"Rentado"})},endRental:(e,t)=>{let r=p.find(t=>t.id===e);if(r){let n=Math.ceil((new Date(t).getTime()-new Date(r.startDate).getTime())/864e5)*r.dailyRate;g(r=>r.map(r=>r.id===e?{...r,endDate:t,status:"Finalizado",totalAmount:n}:r)),k(r.vehicleId,{status:"Disponible"}),I({rentalId:e,clientId:r.clientId,amount:n,date:t,status:"Pendiente"})}},addInvoice:I,updateInvoice:D,addPayment:(e,t,r)=>{let n=Date.now().toString(),a=new Date().toISOString().split("T")[0],i=[];return t.forEach(t=>{let s=h.find(e=>e.id===t.invoiceId);if(!s)return;let l={id:Math.random().toString(36).substr(2,9),receiptId:n,clientId:e,invoiceId:t.invoiceId,amount:t.amount,date:a,method:r};i.push(l);let o=s.payments||[],d=(s.paidAmount||0)+t.amount,c=d>=s.amount?"Pagado":d>0?"Parcial":"Pendiente";D(t.invoiceId,{payments:[...o,l],paidAmount:d,status:c})}),C(e=>[...e,...i]),n},addMaintenance:e=>{let t={...e,id:Date.now().toString()};y(e=>[...e,t]),k(e.vehicleId,{status:"Mantenimiento"})},updateMaintenance:(e,t)=>{if(y(r=>r.map(r=>r.id===e?{...r,...t}:r)),"Completado"===t.status){let t=b.find(t=>t.id===e);t&&k(t.vehicleId,{status:"Disponible"})}},updateCompanySettings:e=>{w(t=>({...t,...e}))},users:j,payments:S,addUser:e=>{let t={...e,id:Date.now().toString()};N(e=>[...e,t])},updateUser:(e,t)=>{N(r=>r.map(r=>r.id===e?{...r,...t}:r))},deleteUser:e=>{N(t=>t.filter(t=>t.id!==e))}},children:t})}function m(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useData must be used within a DataProvider");return e}},4508:function(e,t,r){"use strict";r.d(t,{cn:function(){return i},x:function(){return s}});var n=r(1994),a=r(3335);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}function s(e){return Math.round(e).toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")+" FCFA"}},1047:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},5252:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},9397:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9525:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]])},2489:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5293:function(e,t,r){"use strict";r.d(t,{g7:function(){return c}});var n=r(2265),a=r.t(n,2);function i(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}var s=r(7437),l=Symbol.for("react.lazy"),o=a[" use ".trim().toString()];function d(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===l&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var c=function(e){let t=function(e){let t=n.forwardRef((e,t)=>{let{children:r,...a}=e;if(d(r)&&"function"==typeof o&&(r=o(r._payload)),n.isValidElement(r)){var s;let e,l;let o=(s=r,(e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?s.ref:(e=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?s.props.ref:s.props.ref||s.ref),d=function(e,t){let r={...t};for(let n in t){let a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...e)=>{let t=i(...e);return a(...e),t}:a&&(r[n]=a):"style"===n?r[n]={...a,...i}:"className"===n&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}(a,r.props);return r.type!==n.Fragment&&(d.ref=t?function(...e){return t=>{let r=!1,n=e.map(e=>{let n=i(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():i(e[t],null)}}}}(t,o):o),n.cloneElement(r,d)}return n.Children.count(r)>1?n.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=n.forwardRef((e,r)=>{let{children:a,...i}=e;d(a)&&"function"==typeof o&&(a=o(a._payload));let l=n.Children.toArray(a),c=l.find(m);if(c){let e=c.props.children,a=l.map(t=>t!==c?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,s.jsx)(t,{...i,ref:r,children:n.isValidElement(e)?n.cloneElement(e,void 0,a):null})}return(0,s.jsx)(t,{...i,ref:r,children:a})});return r.displayName=`${e}.Slot`,r}("Slot"),u=Symbol("radix.slottable");function m(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===u}}},function(e){e.O(0,[590,971,117,744],function(){return e(e.s=132)}),_N_E=e.O()}]);