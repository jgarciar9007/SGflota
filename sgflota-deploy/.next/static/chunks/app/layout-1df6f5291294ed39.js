(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{851:function(e,t,a){Promise.resolve().then(a.bind(a,2376)),Promise.resolve().then(a.t.bind(a,9073,23)),Promise.resolve().then(a.t.bind(a,7455,23)),Promise.resolve().then(a.t.bind(a,7960,23))},2376:function(e,t,a){"use strict";a.d(t,{DataProvider:function(){return u},e:function(){return c}});var i=a(7437),n=a(2265);let s=(0,n.createContext)(void 0),o="sgflota_data",l=[{id:"1",name:"Tesla Model 3",type:"El\xe9ctrico",range:"500 km",price:120,image:"https://images.unsplash.com/photo-1536700503339-1e4b06520771?q=80&w=2693&auto=format&fit=crop",status:"Disponible",plate:"ABC-123",year:2023},{id:"2",name:"BMW M4 Competition",type:"Gasolina",range:"600 km",price:250,image:"https://images.unsplash.com/photo-1617788138017-80ad40651399?q=80&w=2670&auto=format&fit=crop",status:"Disponible",plate:"XYZ-789",year:2024},{id:"3",name:"Mercedes AMG GT",type:"Gasolina",range:"450 km",price:300,image:"https://images.unsplash.com/photo-1618843479313-40f8afb4b4d8?q=80&w=2670&auto=format&fit=crop",status:"Disponible",plate:"DEF-456",year:2023}],d=[{id:"1",name:"Juan P\xe9rez",email:"juan@example.com",phone:"+34 600 123 456",address:"Calle Mayor 1, Madrid",dni:"12345678A"}],r={name:"SGFlota - Sistema de Gesti\xf3n de Flota",logo:"",address:"Calle Principal 123, Madrid, Espa\xf1a",phone:"+34 900 123 456",email:"info@sgflota.com",taxId:"B12345678",website:"www.sgflota.com"},m=[{id:"1",name:"Admin User",email:"admin@sgflota.com",role:"Admin",status:"Active"}];function u(e){let{children:t}=e,[a,u]=(0,n.useState)([]),[c,p]=(0,n.useState)([]),[f,g]=(0,n.useState)([]),[h,_]=(0,n.useState)([]),[S,v]=(0,n.useState)([]),[b,w]=(0,n.useState)(r),[y,D]=(0,n.useState)([]),[I,M]=(0,n.useState)([]);(0,n.useEffect)(()=>{let e=localStorage.getItem(o);if(e){let t=JSON.parse(e);u(t.vehicles||l),p(t.clients||d),g(t.rentals||[]),_(t.invoices||[]),v(t.maintenances||[]),w(t.companySettings||r),D(t.users||m),M(t.payments||[])}else u(l),p(d),w(r),D(m)},[]),(0,n.useEffect)(()=>{(a.length>0||c.length>0)&&localStorage.setItem(o,JSON.stringify({vehicles:a,clients:c,rentals:f,invoices:h,maintenances:S,companySettings:b,users:y,payments:I}))},[a,c,f,h,S,b,y,I]);let P=(e,t)=>{u(a=>a.map(a=>a.id===e?{...a,...t}:a))},C=e=>{let t={...e,id:Date.now().toString(),payments:[],paidAmount:0};_(e=>[...e,t])},E=(e,t)=>{_(a=>a.map(a=>a.id===e?{...a,...t}:a))};return(0,i.jsx)(s.Provider,{value:{vehicles:a,clients:c,rentals:f,invoices:h,maintenances:S,companySettings:b,addVehicle:e=>{let t={...e,id:Date.now().toString()};u(e=>[...e,t])},updateVehicle:P,deleteVehicle:e=>{u(t=>t.filter(t=>t.id!==e))},addClient:e=>{let t={...e,id:Date.now().toString()};p(e=>[...e,t])},updateClient:(e,t)=>{p(a=>a.map(a=>a.id===e?{...a,...t}:a))},deleteClient:e=>{p(t=>t.filter(t=>t.id!==e))},addRental:e=>{let t={...e,id:Date.now().toString()};g(e=>[...e,t]),P(e.vehicleId,{status:"Rentado"})},endRental:(e,t)=>{let a=f.find(t=>t.id===e);if(a){let i=Math.ceil((new Date(t).getTime()-new Date(a.startDate).getTime())/864e5)*a.dailyRate;g(a=>a.map(a=>a.id===e?{...a,endDate:t,status:"Finalizado",totalAmount:i}:a)),P(a.vehicleId,{status:"Disponible"}),C({rentalId:e,clientId:a.clientId,amount:i,date:t,status:"Pendiente"})}},addInvoice:C,updateInvoice:E,addPayment:(e,t,a)=>{let i=Date.now().toString(),n=new Date().toISOString().split("T")[0],s=[];return t.forEach(t=>{let o=h.find(e=>e.id===t.invoiceId);if(!o)return;let l={id:Math.random().toString(36).substr(2,9),receiptId:i,clientId:e,invoiceId:t.invoiceId,amount:t.amount,date:n,method:a};s.push(l);let d=o.payments||[],r=(o.paidAmount||0)+t.amount,m=r>=o.amount?"Pagado":r>0?"Parcial":"Pendiente";E(t.invoiceId,{payments:[...d,l],paidAmount:r,status:m})}),M(e=>[...e,...s]),i},addMaintenance:e=>{let t={...e,id:Date.now().toString()};v(e=>[...e,t]),P(e.vehicleId,{status:"Mantenimiento"})},updateMaintenance:(e,t)=>{if(v(a=>a.map(a=>a.id===e?{...a,...t}:a)),"Completado"===t.status){let t=S.find(t=>t.id===e);t&&P(t.vehicleId,{status:"Disponible"})}},updateCompanySettings:e=>{w(t=>({...t,...e}))},users:y,payments:I,addUser:e=>{let t={...e,id:Date.now().toString()};D(e=>[...e,t])},updateUser:(e,t)=>{D(a=>a.map(a=>a.id===e?{...a,...t}:a))},deleteUser:e=>{D(t=>t.filter(t=>t.id!==e))}},children:t})}function c(){let e=(0,n.useContext)(s);if(void 0===e)throw Error("useData must be used within a DataProvider");return e}},7960:function(){},7455:function(e){e.exports={style:{fontFamily:"'__geistMono_c3aa02', '__geistMono_Fallback_c3aa02'"},className:"__className_c3aa02",variable:"__variable_c3aa02"}},9073:function(e){e.exports={style:{fontFamily:"'__geistSans_1e4310', '__geistSans_Fallback_1e4310'"},className:"__className_1e4310",variable:"__variable_1e4310"}}},function(e){e.O(0,[77,971,117,744],function(){return e(e.s=851)}),_N_E=e.O()}]);