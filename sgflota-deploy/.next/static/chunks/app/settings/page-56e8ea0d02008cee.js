(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{6993:function(e,t,a){Promise.resolve().then(a.bind(a,902))},902:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var s=a(7437),r=a(2265),i=a(2376),l=a(9178),n=a(4226),d=a(8068),o=a(9205);let c=(0,o.Z)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]);var m=a(5805),u=a(1817),x=a(7689);let h=(0,o.Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var g=a(9397);let p=(0,o.Z)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var f=a(8930),b=a(2489),y=a(3145);function v(){let{companySettings:e,updateCompanySettings:t,users:a,addUser:o,updateUser:v,deleteUser:j}=(0,i.e)(),[N,w]=(0,r.useState)("company"),[k,C]=(0,r.useState)(e),[S,M]=(0,r.useState)(!1),[I,Z]=(0,r.useState)(!1),[D,E]=(0,r.useState)(!1),[A,P]=(0,r.useState)(null),[R,U]=(0,r.useState)({name:"",email:"",role:"User",status:"Active"}),z=async e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){Z(!0);try{let e=new FormData;e.append("file",a),e.append("type","logo");let t=await fetch("/api/upload",{method:"POST",body:e});if(!t.ok)throw Error("Upload failed");let s=await t.json();C(e=>({...e,logo:s.url}))}catch(e){console.error("Upload error:",e),alert("Error al subir la imagen. Por favor intenta de nuevo.")}finally{Z(!1)}}},F=e=>{e?(P(e),U({name:e.name,email:e.email,role:e.role,status:e.status})):(P(null),U({name:"",email:"",role:"User",status:"Active"})),E(!0)},q=e=>{confirm("\xbfEst\xe1s seguro de que deseas eliminar este usuario?")&&j(e)};return(0,s.jsxs)("div",{className:"space-y-6 max-w-4xl",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-3xl font-bold tracking-tight text-white",children:"Configuraci\xf3n"}),(0,s.jsx)("p",{className:"text-gray-300",children:"Administra la configuraci\xf3n de la empresa y los usuarios"})]}),(0,s.jsxs)("div",{className:"flex space-x-1 bg-gray-800/50 p-1 rounded-lg w-fit",children:[(0,s.jsx)("button",{onClick:()=>w("company"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("company"===N?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"),children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c,{className:"h-4 w-4"}),"Empresa"]})}),(0,s.jsx)("button",{onClick:()=>w("users"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("users"===N?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"),children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4"}),"Usuarios"]})})]}),"company"===N?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("form",{onSubmit:e=>{e.preventDefault(),t(k),M(!0),setTimeout(()=>M(!1),3e3)},children:(0,s.jsxs)(l.Zb,{className:"border-gray-700 bg-gray-800/50",children:[(0,s.jsx)(l.Ol,{children:(0,s.jsxs)(l.ll,{className:"text-white flex items-center gap-2",children:[(0,s.jsx)(c,{className:"h-5 w-5 text-blue-400"}),"Informaci\xf3n de la Empresa"]})}),(0,s.jsxs)(l.aY,{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm text-gray-300 font-medium",children:"Logo de la Empresa"}),(0,s.jsxs)("div",{className:"mt-2 flex items-center gap-4",children:[k.logo&&(0,s.jsx)(y.default,{src:k.logo,alt:"Logo",width:80,height:80,className:"h-20 w-20 object-contain bg-white rounded-lg p-2",unoptimized:!0}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)("label",{className:"flex-1",children:[(0,s.jsx)("div",{className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md cursor-pointer transition-colors",children:I?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Z,{className:"h-4 w-4 animate-spin"}),"Subiendo..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Z,{className:"h-4 w-4"}),"Subir desde PC"]})}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:z,className:"hidden",disabled:I})]})}),(0,s.jsx)(d.I,{value:k.logo,onChange:e=>C({...k,logo:e.target.value}),placeholder:"O ingresa la URL del logo",className:"bg-gray-800 border-gray-700 text-white"}),(0,s.jsx)("p",{className:"text-xs text-gray-400",children:"Sube una imagen desde tu PC o ingresa una URL. Se mostrar\xe1 en las facturas."})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm text-gray-300 font-medium",children:"Nombre de la Empresa"}),(0,s.jsx)(d.I,{value:k.name,onChange:e=>C({...k,name:e.target.value}),className:"bg-gray-800 border-gray-700 text-white mt-1",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm text-gray-300 font-medium",children:"NIF/CIF"}),(0,s.jsx)(d.I,{value:k.taxId,onChange:e=>C({...k,taxId:e.target.value}),className:"bg-gray-800 border-gray-700 text-white mt-1",placeholder:"B12345678",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm text-gray-300 font-medium",children:"Direcci\xf3n"}),(0,s.jsx)(d.I,{value:k.address,onChange:e=>C({...k,address:e.target.value}),className:"bg-gray-800 border-gray-700 text-white mt-1",required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm text-gray-300 font-medium",children:"Tel\xe9fono"}),(0,s.jsx)(d.I,{value:k.phone,onChange:e=>C({...k,phone:e.target.value}),className:"bg-gray-800 border-gray-700 text-white mt-1",placeholder:"+34 900 123 456",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm text-gray-300 font-medium",children:"Email"}),(0,s.jsx)(d.I,{type:"email",value:k.email,onChange:e=>C({...k,email:e.target.value}),className:"bg-gray-800 border-gray-700 text-white mt-1",placeholder:"info@empresa.com",required:!0})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm text-gray-300 font-medium",children:"Sitio Web"}),(0,s.jsx)(d.I,{value:k.website,onChange:e=>C({...k,website:e.target.value}),className:"bg-gray-800 border-gray-700 text-white mt-1",placeholder:"www.empresa.com"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-700",children:[(0,s.jsxs)(n.z,{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white",children:[(0,s.jsx)(h,{className:"mr-2 h-4 w-4"}),"Guardar Cambios"]}),S&&(0,s.jsx)("span",{className:"text-sm text-green-400 flex items-center gap-2",children:"✓ Cambios guardados correctamente"})]})]})]})}),(0,s.jsxs)(l.Zb,{className:"border-gray-700 bg-gray-800/50",children:[(0,s.jsx)(l.Ol,{children:(0,s.jsx)(l.ll,{className:"text-white",children:"Vista Previa"})}),(0,s.jsx)(l.aY,{children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg",children:[k.logo&&(0,s.jsx)(y.default,{src:k.logo,alt:"Logo",width:64,height:64,className:"h-16 mb-4 object-contain",unoptimized:!0}),(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:k.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["NIF/CIF: ",k.taxId]}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:k.address}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[k.phone," • ",k.email]}),k.website&&(0,s.jsx)("p",{className:"text-sm text-gray-600",children:k.website})]})})]})]}):(0,s.jsxs)(l.Zb,{className:"border-gray-700 bg-gray-800/50",children:[(0,s.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between",children:[(0,s.jsxs)(l.ll,{className:"text-white flex items-center gap-2",children:[(0,s.jsx)(m.Z,{className:"h-5 w-5 text-blue-400"}),"Gesti\xf3n de Usuarios"]}),(0,s.jsxs)(n.z,{onClick:()=>F(),className:"bg-blue-600 hover:bg-blue-700 text-white",children:[(0,s.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Agregar Usuario"]})]}),(0,s.jsx)(l.aY,{children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-left text-sm text-gray-300",children:[(0,s.jsx)("thead",{className:"bg-gray-800 text-gray-100 uppercase font-medium",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 rounded-tl-lg",children:"Nombre"}),(0,s.jsx)("th",{className:"px-4 py-3",children:"Email"}),(0,s.jsx)("th",{className:"px-4 py-3",children:"Rol"}),(0,s.jsx)("th",{className:"px-4 py-3",children:"Estado"}),(0,s.jsx)("th",{className:"px-4 py-3 rounded-tr-lg text-right",children:"Acciones"})]})}),(0,s.jsxs)("tbody",{className:"divide-y divide-gray-700",children:[a.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-700/50 transition-colors",children:[(0,s.jsx)("td",{className:"px-4 py-3 font-medium text-white",children:e.name}),(0,s.jsx)("td",{className:"px-4 py-3",children:e.email}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("Admin"===e.role?"bg-purple-900/50 text-purple-200":"bg-blue-900/50 text-blue-200"),children:e.role})}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("Active"===e.status?"bg-green-900/50 text-green-200":"bg-red-900/50 text-red-200"),children:"Active"===e.status?"Activo":"Inactivo"})}),(0,s.jsx)("td",{className:"px-4 py-3 text-right",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,s.jsx)("button",{onClick:()=>F(e),className:"p-1 hover:bg-gray-600 rounded-md text-blue-400 transition-colors",title:"Editar",children:(0,s.jsx)(p,{className:"h-4 w-4"})}),(0,s.jsx)("button",{onClick:()=>q(e.id),className:"p-1 hover:bg-gray-600 rounded-md text-red-400 transition-colors",title:"Eliminar",children:(0,s.jsx)(f.Z,{className:"h-4 w-4"})})]})})]},e.id)),0===a.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:"No hay usuarios registrados."})})]})]})})})]}),D&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:(0,s.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg shadow-xl w-full max-w-md animate-in fade-in zoom-in duration-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white",children:A?"Editar Usuario":"Nuevo Usuario"}),(0,s.jsx)("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-white transition-colors",children:(0,s.jsx)(b.Z,{className:"h-5 w-5"})})]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),A?v(A.id,R):o(R),E(!1)},className:"p-4 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm text-gray-300 font-medium",children:"Nombre"}),(0,s.jsx)(d.I,{value:R.name,onChange:e=>U({...R,name:e.target.value}),className:"bg-gray-700 border-gray-600 text-white mt-1",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm text-gray-300 font-medium",children:"Email"}),(0,s.jsx)(d.I,{type:"email",value:R.email,onChange:e=>U({...R,email:e.target.value}),className:"bg-gray-700 border-gray-600 text-white mt-1",required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm text-gray-300 font-medium",children:"Rol"}),(0,s.jsxs)("select",{value:R.role,onChange:e=>U({...R,role:e.target.value}),className:"w-full bg-gray-700 border-gray-600 text-white rounded-md h-10 px-3 mt-1 focus:ring-2 focus:ring-blue-500 outline-none",children:[(0,s.jsx)("option",{value:"Admin",children:"Admin"}),(0,s.jsx)("option",{value:"User",children:"User"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm text-gray-300 font-medium",children:"Estado"}),(0,s.jsxs)("select",{value:R.status,onChange:e=>U({...R,status:e.target.value}),className:"w-full bg-gray-700 border-gray-600 text-white rounded-md h-10 px-3 mt-1 focus:ring-2 focus:ring-blue-500 outline-none",children:[(0,s.jsx)("option",{value:"Active",children:"Activo"}),(0,s.jsx)("option",{value:"Inactive",children:"Inactivo"})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,s.jsx)(n.z,{type:"button",onClick:()=>E(!1),className:"bg-gray-700 hover:bg-gray-600 text-white",children:"Cancelar"}),(0,s.jsx)(n.z,{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Guardar"})]})]})]})})]})}},4226:function(e,t,a){"use strict";a.d(t,{z:function(){return n}});var s=a(7437),r=a(2265),i=a(5293),l=a(4508);let n=r.forwardRef((e,t)=>{let{className:a,variant:r="default",size:n="default",asChild:d=!1,...o}=e,c=d?i.g7:"button";return(0,s.jsx)(c,{className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-red-500 text-white hover:bg-red-600",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground"}[r],{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}[n],a),ref:t,...o})});n.displayName="Button"},9178:function(e,t,a){"use strict";a.d(t,{Ol:function(){return n},SZ:function(){return o},Zb:function(){return l},aY:function(){return c},eW:function(){return m},ll:function(){return d}});var s=a(7437),r=a(2265),i=a(4508);let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border border-border bg-card text-card-foreground shadow-sm glass",a),...r})});l.displayName="Card";let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...r})});n.displayName="CardHeader";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});d.displayName="CardTitle";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-gray-400",a),...r})});o.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent";let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...r})});m.displayName="CardFooter"},8068:function(e,t,a){"use strict";a.d(t,{I:function(){return l}});var s=a(7437),r=a(2265),i=a(4508);let l=r.forwardRef((e,t)=>{let{className:a,type:r,...l}=e;return(0,s.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","border-white/10 bg-white/5 focus:border-primary",a),ref:t,...l})});l.displayName="Input"},2376:function(e,t,a){"use strict";a.d(t,{DataProvider:function(){return m},e:function(){return u}});var s=a(7437),r=a(2265);let i=(0,r.createContext)(void 0),l="sgflota_data",n=[{id:"1",name:"Tesla Model 3",type:"El\xe9ctrico",range:"500 km",price:120,image:"https://images.unsplash.com/photo-1536700503339-1e4b06520771?q=80&w=2693&auto=format&fit=crop",status:"Disponible",plate:"ABC-123",year:2023},{id:"2",name:"BMW M4 Competition",type:"Gasolina",range:"600 km",price:250,image:"https://images.unsplash.com/photo-1617788138017-80ad40651399?q=80&w=2670&auto=format&fit=crop",status:"Disponible",plate:"XYZ-789",year:2024},{id:"3",name:"Mercedes AMG GT",type:"Gasolina",range:"450 km",price:300,image:"https://images.unsplash.com/photo-1618843479313-40f8afb4b4d8?q=80&w=2670&auto=format&fit=crop",status:"Disponible",plate:"DEF-456",year:2023}],d=[{id:"1",name:"Juan P\xe9rez",email:"juan@example.com",phone:"+34 600 123 456",address:"Calle Mayor 1, Madrid",dni:"12345678A"}],o={name:"SGFlota - Sistema de Gesti\xf3n de Flota",logo:"",address:"Calle Principal 123, Madrid, Espa\xf1a",phone:"+34 900 123 456",email:"info@sgflota.com",taxId:"B12345678",website:"www.sgflota.com"},c=[{id:"1",name:"Admin User",email:"admin@sgflota.com",role:"Admin",status:"Active"}];function m(e){let{children:t}=e,[a,m]=(0,r.useState)([]),[u,x]=(0,r.useState)([]),[h,g]=(0,r.useState)([]),[p,f]=(0,r.useState)([]),[b,y]=(0,r.useState)([]),[v,j]=(0,r.useState)(o),[N,w]=(0,r.useState)([]),[k,C]=(0,r.useState)([]);(0,r.useEffect)(()=>{let e=localStorage.getItem(l);if(e){let t=JSON.parse(e);m(t.vehicles||n),x(t.clients||d),g(t.rentals||[]),f(t.invoices||[]),y(t.maintenances||[]),j(t.companySettings||o),w(t.users||c),C(t.payments||[])}else m(n),x(d),j(o),w(c)},[]),(0,r.useEffect)(()=>{(a.length>0||u.length>0)&&localStorage.setItem(l,JSON.stringify({vehicles:a,clients:u,rentals:h,invoices:p,maintenances:b,companySettings:v,users:N,payments:k}))},[a,u,h,p,b,v,N,k]);let S=(e,t)=>{m(a=>a.map(a=>a.id===e?{...a,...t}:a))},M=e=>{let t={...e,id:Date.now().toString(),payments:[],paidAmount:0};f(e=>[...e,t])},I=(e,t)=>{f(a=>a.map(a=>a.id===e?{...a,...t}:a))};return(0,s.jsx)(i.Provider,{value:{vehicles:a,clients:u,rentals:h,invoices:p,maintenances:b,companySettings:v,addVehicle:e=>{let t={...e,id:Date.now().toString()};m(e=>[...e,t])},updateVehicle:S,deleteVehicle:e=>{m(t=>t.filter(t=>t.id!==e))},addClient:e=>{let t={...e,id:Date.now().toString()};x(e=>[...e,t])},updateClient:(e,t)=>{x(a=>a.map(a=>a.id===e?{...a,...t}:a))},deleteClient:e=>{x(t=>t.filter(t=>t.id!==e))},addRental:e=>{let t={...e,id:Date.now().toString()};g(e=>[...e,t]),S(e.vehicleId,{status:"Rentado"})},endRental:(e,t)=>{let a=h.find(t=>t.id===e);if(a){let s=Math.ceil((new Date(t).getTime()-new Date(a.startDate).getTime())/864e5)*a.dailyRate;g(a=>a.map(a=>a.id===e?{...a,endDate:t,status:"Finalizado",totalAmount:s}:a)),S(a.vehicleId,{status:"Disponible"}),M({rentalId:e,clientId:a.clientId,amount:s,date:t,status:"Pendiente"})}},addInvoice:M,updateInvoice:I,addPayment:(e,t,a)=>{let s=Date.now().toString(),r=new Date().toISOString().split("T")[0],i=[];return t.forEach(t=>{let l=p.find(e=>e.id===t.invoiceId);if(!l)return;let n={id:Math.random().toString(36).substr(2,9),receiptId:s,clientId:e,invoiceId:t.invoiceId,amount:t.amount,date:r,method:a};i.push(n);let d=l.payments||[],o=(l.paidAmount||0)+t.amount,c=o>=l.amount?"Pagado":o>0?"Parcial":"Pendiente";I(t.invoiceId,{payments:[...d,n],paidAmount:o,status:c})}),C(e=>[...e,...i]),s},addMaintenance:e=>{let t={...e,id:Date.now().toString()};y(e=>[...e,t]),S(e.vehicleId,{status:"Mantenimiento"})},updateMaintenance:(e,t)=>{if(y(a=>a.map(a=>a.id===e?{...a,...t}:a)),"Completado"===t.status){let t=b.find(t=>t.id===e);t&&S(t.vehicleId,{status:"Disponible"})}},updateCompanySettings:e=>{j(t=>({...t,...e}))},users:N,payments:k,addUser:e=>{let t={...e,id:Date.now().toString()};w(e=>[...e,t])},updateUser:(e,t)=>{w(a=>a.map(a=>a.id===e?{...a,...t}:a))},deleteUser:e=>{w(t=>t.filter(t=>t.id!==e))}},children:t})}function u(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useData must be used within a DataProvider");return e}},4508:function(e,t,a){"use strict";a.d(t,{cn:function(){return i},x:function(){return l}});var s=a(1994),r=a(3335);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}function l(e){return Math.round(e).toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")+" FCFA"}},1817:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9397:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8930:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},7689:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},5805:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},2489:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5523:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return s}});let s=a(7043)._(a(2265)).default.createContext(null)}},function(e){e.O(0,[590,458,971,117,744],function(){return e(e.s=6993)}),_N_E=e.O()}]);